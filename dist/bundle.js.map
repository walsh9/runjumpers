{"version":3,"sources":["webpack:///webpack/bootstrap 10bb01d9d01197e576d9","webpack:///./utils.js","webpack:///./graphics.js","webpack:///./character.js","webpack:///./map.js","webpack:///./screen.js","webpack:///./screens/title.js","webpack:///./timer.js","webpack:///./game.js","webpack:///./screens/running.js","webpack:///./screens/create.js"],"names":["mod","randomInt","near","x","y","min","max","Math","floor","random","num1","num2","threshold","abs","Graphics","loadTileSet","imageSource","tileWidth","tileHeight","Promise","resolve","imageElement","document","createElement","onload","event","image","target","canvas","width","height","ctx","getContext","drawImage","imageData","getImageData","img","tileColumns","tileRows","src","clearScreen","color","fillStyle","fillRect","drawTile","tileSet","tileX","tileY","tX","tY","Character","tiles","map","parts","setRandomPart","pos","velocity","acceleration","state","runFrame","time","footPos","floorHeight","whatsHere","delta","ticks","graphics","animFrame","rearHair","body","face","frontHair","console","log","partName","Map","mapstring","stage","split","offset","heights","index","mapTiles","tile","GROUND","COLUMN_ROOT","COLUMN_MID","COLUMN_TOP","leftmostTile","rightmostTile","visibleTiles","slice","forEach","t","Screen","game","TitleScreen","strokeStyle","strokeText","key","currentScreen","Timer","timeStep","runTime","started","currentTime","Date","now","init","requestAnimationFrame","start","bind","newTime","frameTime","update","render","window","Game","Gamestate","gameTimer","querySelector","Assets","Tiles","all","then","tilesets","assets","addEventListener","keydown","map01","RunningScreen","character","jump","CreateScreen","selection","choices","blink","length","setPrevPart","setNextPart","nextScreen","selectUp","preventDefault","selectDown","setLeft","setRight"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 10bb01d9d01197e576d9\n **/","export function mod(x, y) {\n  return ((x % y) + y) % y;\n}\n\nexport function randomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport function near(num1, num2, threshold) {\n  return Math.abs(num1 - num2) <= threshold;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./utils.js\n **/","let Graphics = {};\n\nGraphics.loadTileSet = function(imageSource, tileWidth, tileHeight) {\n  return new Promise(function(resolve) {\n    var imageElement = document.createElement('img');\n    imageElement.onload = function(event) {\n      var image = event.target;\n      var canvas = document.createElement('canvas');\n      var width = image.width;\n      var height = image.height;\n      canvas.width = width;\n      canvas.height = height;\n      var ctx = canvas.getContext('2d');\n      ctx.drawImage(image, 0, 0, width, height);\n      var imageData = ctx.getImageData(0, 0, width, height);\n      imageData.img = image;\n      imageData.tileWidth = tileWidth;\n      imageData.tileHeight = tileHeight;\n      imageData.tileColumns = Math.floor(width / tileWidth);\n      imageData.tileRows = Math.floor(height / tileHeight);\n      resolve(imageData);\n    };\n    imageElement.src = imageSource;\n  });\n};\n\nGraphics.clearScreen = function(ctx, color) {\n  ctx.fillStyle = color;\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n};\n\nGraphics.drawTile = function(tileSet, tileX, tileY, x, y, ctx) {\n  var tX = Math.floor(tileSet.tileWidth * tileX);\n  var tY = Math.floor(tileSet.tileHeight * tileY);\n  ctx.drawImage(tileSet.img,\n    tX, tY, tileSet.tileWidth, tileSet.tileHeight,\n    x,  y,  tileSet.tileWidth, tileSet.tileHeight);\n};\n\nexport default Graphics;\n\n\n\n/** WEBPACK FOOTER **\n ** ./graphics.js\n **/","import { near, mod } from './utils';\n\nexport default class Character {\n  constructor(tiles, map) {\n    this.tiles = tiles;\n    this.map = map;\n    this.parts = {};\n    this.setRandomPart('rearHair');\n    this.setRandomPart('face');\n    this.setRandomPart('body');\n    this.setRandomPart('frontHair');\n    this.pos = {x: 30, y: 50};\n    this.velocity = {x: 0, y: 0};\n    this.acceleration = {x: 0, y: 0.0005};\n    this.state = 'standing';\n    this.runFrame = 1;\n  }\n\n  update(time) {\n    let footPos = this.state === 'running' ? 11 : 18;\n    let floorHeight = 117 - this.map.whatsHere(this.pos.x + footPos).height;\n    if (!near(this.pos.y, floorHeight, 0.1) || this.velocity.y < 0 ) {\n      if (this.velocity.y <= 0) {\n        this.state = 'jumping';\n      } else {\n        this.state = 'falling';\n      }\n      this.velocity.y += time.delta * this.acceleration.y;\n      if (near(this.velocity.y, 0, 0.0000001)) {\n        this.velocity.y = 0;\n      }\n      this.pos.y      += time.delta * this.velocity.y;\n    } else {\n      this.state = 'running';\n      this.velocity.y = 0;\n      this.pos.y      = floorHeight;\n    }\n    this.runFrame = (time.ticks % 6) < 3 ? 1 : 2;\n  }\n\n  render(graphics, ctx) {\n    let animFrame = 0;\n    if (this.state === 'running') {\n      animFrame = this.runFrame;\n    } else if (this.state === 'jumping') {\n      animFrame = 3;\n    } else if (this.state === 'falling') {\n      animFrame = 0;\n    }\n    graphics.drawTile(this.tiles.rearHair, this.parts.rearHair, 0, this.pos.x, this.pos.y, ctx);\n    graphics.drawTile(this.tiles.body, this.parts.body, animFrame, this.pos.x, this.pos.y, ctx);\n    graphics.drawTile(this.tiles.face, this.parts.face, 0, this.pos.x, this.pos.y, ctx);\n    graphics.drawTile(this.tiles.frontHair, this.parts.frontHair, 0, this.pos.x, this.pos.y, ctx);\n  }\n\n  jump() {\n    console.log(this.pos, this.velocity);\n    if (this.velocity.y === 0) {\n      this.velocity.y = -0.24;\n    }\n  }\n\n  setRandomPart(partName) {\n    this.parts[partName] = Math.floor((Math.random() * this.tiles[partName].tileColumns));\n  }\n\n  setNextPart(partName) {\n    this.parts[partName] = mod(this.parts[partName] + 1, this.tiles[partName].tileColumns);\n  }\n\n  setPrevPart(partName) {\n    this.parts[partName] = mod(this.parts[partName] - 1, this.tiles[partName].tileColumns);\n  }\n\n}\n\n\n/** WEBPACK FOOTER **\n ** ./character.js\n **/","export default class Map {\n  constructor(tiles, mapstring) {\n    this.tiles = tiles;\n    this.stage = mapstring.split('');\n    this.x = 0;\n  }\n  update(time) {\n    this.x -= time.delta * 0.1;\n  }\n  whatsHere(offset) {\n    let heights = [-100, 13, 29, 45];\n    let index = Math.floor((-this.x + offset) / this.tiles.mapTiles.tileWidth);\n    let tile = this.stage[index];\n    return {height: heights[tile]};\n  }\n  render(graphics, ctx) {\n    const y = [128, 112, 96, 80, 68];\n    const GROUND = 0;\n    const COLUMN_ROOT = 1;\n    const COLUMN_MID = 2;\n    const COLUMN_TOP = 3;\n    let leftmostTile = Math.floor((-this.x) / this.tiles.mapTiles.tileWidth);\n    let rightmostTile = leftmostTile + 10;\n    let visibleTiles = this.stage.slice(leftmostTile, rightmostTile);\n    this.stage.forEach((t, index) => {\n      if (index < leftmostTile || index > rightmostTile) {\n        return;\n      }\n      let x = this.x + this.tiles.mapTiles.tileWidth * index;\n      switch(t) {\n      case '0':\n        break;\n      case '1':\n        graphics.drawTile(this.tiles.mapTiles, COLUMN_TOP, 0, x, y[0], ctx);\n        break;\n      case '2':\n        graphics.drawTile(this.tiles.mapTiles, COLUMN_MID, 0, x, y[0], ctx);\n        graphics.drawTile(this.tiles.mapTiles, COLUMN_TOP, 0, x, y[1], ctx);\n        break;\n      case '3':\n        graphics.drawTile(this.tiles.mapTiles, COLUMN_MID, 0, x, y[0], ctx);\n        graphics.drawTile(this.tiles.mapTiles, COLUMN_MID, 0, x, y[1], ctx);\n        graphics.drawTile(this.tiles.mapTiles, COLUMN_TOP, 0, x, y[2], ctx);\n        break;\n      }\n    });\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./map.js\n **/","export default class Screen {\n  constructor(game) {\n    this.game = game;\n  }\n  update () {}\n  render () {}\n  keydown() {}\n}\n\n\n/** WEBPACK FOOTER **\n ** ./screen.js\n **/","import Screen from '../screen';\nimport CreateScreen from './create';\n\nexport default class TitleScreen extends Screen {\n  constructor(game) {\n    super(game);\n  }\n\n  render(graphics, ctx) {\n    graphics.clearScreen(ctx, '#b4a56a');\n    ctx.strokeStyle = \"#ffffff\";\n    ctx.strokeText('runjumpers', 30, 30);\n    ctx.strokeText('press z to start', 30, 90);\n  }\n\n  keydown(key) {\n    switch(key) {\n    case 'z':\n      console.log('good');\n      this.game.currentScreen = new CreateScreen(this.game);\n      break;\n    }\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./screens/title.js\n **/","export default class Timer {\n  constructor(game, timeStep) {\n    this.runTime = 0;\n    this.ticks = 0;\n    this.started = false;\n    this.timeStep = timeStep;\n    this.game = game;\n  }\n\n  start() {\n    if (this.started === false) {\n      this.started = true;\n      this.currentTime = Date.now();\n      this.game.init();\n    }\n    requestAnimationFrame(this.start.bind(this));\n    let newTime = Date.now();\n    let frameTime = newTime - this.currentTime;\n    this.currentTime = newTime;\n    while (frameTime > 0) {\n      var delta = Math.min(frameTime, this.timeStep);\n      frameTime -= delta;\n      this.runTime += delta;\n      this.game.update({delta, ticks: this.ticks, runTime: this.runTime});\n    }\n    this.ticks++;\n    this.game.render();\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./timer.js\n **/","import Graphics from './graphics';\nimport Character from './character';\nimport Timer from './timer';\nimport Map from './map';\nimport TitleScreen from './screens/title';\n\nwindow.Game = {\n  init() {\n    this.currentScreen = new TitleScreen(this);\n  },\n  update(time) {\n    this.currentScreen.update(time);\n  },\n  render() {\n    this.currentScreen.render(Graphics, Gamestate.ctx);\n  }\n};\nlet gameTimer = new Timer(Game, 1 / 60);\n\nlet Gamestate = {};\nGamestate.ctx = document.querySelector('canvas').getContext('2d');\nlet Assets = {};\nAssets.Tiles = {};\nPromise.all([\n  Graphics.loadTileSet('i/ppl_rear_hair.png', 27, 27),\n  Graphics.loadTileSet('i/ppl_body.png', 27, 27),\n  Graphics.loadTileSet('i/ppl_face.png', 27, 27),\n  Graphics.loadTileSet('i/ppl_front_hair.png', 27, 27),\n  Graphics.loadTileSet('i/misc.png', 16, 16)\n]).then(function(tilesets) {\n  Assets.Tiles.rearHair = tilesets[0];\n  Assets.Tiles.body = tilesets[1];\n  Assets.Tiles.face = tilesets[2];\n  Assets.Tiles.frontHair = tilesets[3];\n  Assets.Tiles.mapTiles = tilesets[4];\n  window.Game.assets = Assets;\n  gameTimer.start();\n});\n\nwindow.addEventListener('keydown', function(event) {\n  let key = event.key;\n  Game.currentScreen.keydown(key, event);\n});\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./game.js\n **/","import Screen from '../screen';\nimport Map from '../map';\nimport Character from '../character';\n\nconst map01 = \"1121111111111211111000110111211131123111111113111110011011111000011111111113331111110000000000000000000\";\n\n\nexport default class RunningScreen extends Screen {\n  constructor(game, character) {\n    super(game);\n    this.map = new Map(this.game.assets.Tiles, map01);\n    this.character = character;\n    character.map = this.map;\n  }\n\n  update(time) {\n    this.map.update(time);\n    this.character.update(time);\n  }\n\n  render(graphics, ctx) {\n    graphics.clearScreen(ctx, '#b4a56a');\n    this.map.render(graphics, ctx);\n    this.character.render(graphics, ctx);\n  }\n\n  keydown(key) {\n    switch(key) {\n    case 'z':\n      this.character.jump();\n    }\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./screens/running.js\n **/","import Screen from '../screen';\nimport { mod } from '../utils';\nimport RunningScreen from './running';\nimport Character from '../character';\n\nexport default class CreateScreen extends Screen {\n  constructor(game) {\n    super(game);\n    this.selection = 0;\n    this.choices = ['rearHair', 'frontHair', 'face', 'body', 'next'];\n    this.character = new Character(this.game.assets.Tiles);\n    this.blink = 0;\n  }\n\n  update(time) {\n    this.blink = time.ticks % 10 > 5;\n  }\n\n  render(graphics, ctx) {\n    graphics.clearScreen(ctx, '#b4a56a');\n    ctx.strokeStyle = \"#ffffff\";\n    ctx.strokeText('Create your Runjumper', 10, 10);\n    ctx.strokeText('hair', 80, 30);\n    ctx.strokeText('front', 80, 40);\n    ctx.strokeText('face', 80, 50);\n    ctx.strokeText('body', 80, 60);\n    ctx.strokeText('GO!', 80, 80);\n    if (this.selection < 4) {\n      ctx.strokeText('<               >', 70, this.selection * 10 + 30);\n    }\n    if (this.selection === 4 && this.blink) {\n      ctx.strokeText('[              ]', 70, 80);\n    }\n    this.character.render(graphics, ctx);\n  }\n\n  nextScreen() {\n    if (this.selection === 4) {\n      this.game.currentScreen = new RunningScreen(this.game, this.character);\n    }\n  }\n\n  selectUp() {\n    this.selection = Math.max(this.selection - 1, 0);\n  }\n\n  selectDown() {\n    this.selection = Math.min(this.selection + 1, this.choices.length);\n  }\n\n  setLeft() {\n    if (this.selection < 4) {\n      this.character.setPrevPart(this.choices[this.selection]);\n    }\n  }\n\n  setRight() {\n    if (this.selection < 4) {\n      this.character.setNextPart(this.choices[this.selection]);\n    }\n  }\n\n  keydown(key, event) {\n    switch(key) {\n    case 'z':\n      this.nextScreen();\n      break;\n    case 'ArrowUp':\n      this.selectUp();\n      event.preventDefault();\n      break;\n    case 'ArrowDown':\n      this.selectDown();\n      event.preventDefault();\n      break;\n    case 'ArrowLeft':\n      this.setLeft();\n      event.preventDefault();\n      break;\n    case 'ArrowRight':\n      this.setRight();\n      event.preventDefault();\n      break;\n    }\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./screens/create.js\n **/"],"sourceRoot":""}