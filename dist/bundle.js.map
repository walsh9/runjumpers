{"version":3,"sources":["webpack:///webpack/bootstrap 1fe3fc874e62dbeb848a","webpack:///./utils.js","webpack:///./graphics.js","webpack:///./character.js","webpack:///./map.js","webpack:///./timer.js","webpack:///./game.js"],"names":["mod","randomInt","near","x","y","min","max","Math","floor","random","num1","num2","threshold","abs","Graphics","loadTileSet","imageSource","tileWidth","tileHeight","Promise","resolve","imageElement","document","createElement","onload","event","image","target","canvas","width","height","ctx","getContext","drawImage","imageData","getImageData","img","tileColumns","tileRows","src","drawTile","tileSet","tileX","tileY","tX","tY","Character","tiles","map","parts","setRandomPart","pos","velocity","acceleration","state","runFrame","time","footPos","floorHeight","whatsHere","delta","ticks","graphics","animFrame","rearHair","body","face","frontHair","console","log","partName","Map","mapstring","stage","split","offset","heights","index","mapTiles","tile","GROUND","COLUMN_ROOT","COLUMN_MID","COLUMN_TOP","leftmostTile","rightmostTile","visibleTiles","slice","forEach","t","Timer","game","timeStep","runTime","started","currentTime","Date","now","init","requestAnimationFrame","start","bind","newTime","frameTime","update","render","map01","Game","Assets","Tiles","character","Gamestate","fillStyle","fillRect","gameTimer","querySelector","all","then","tilesets","window","addEventListener","e","key","setNextPart","jump"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;SCtCgBA,G,GAAAA,G;SAIAC,S,GAAAA,S;SAIAC,I,GAAAA,I;AART,UAASF,GAAT,CAAaG,CAAb,EAAgBC,CAAhB,EAAmB;AACxB,UAAO,CAAED,IAAIC,CAAL,GAAUA,CAAX,IAAgBA,CAAvB;AACD;;AAEM,UAASH,SAAT,CAAmBI,GAAnB,EAAwBC,GAAxB,EAA6B;AAClC,UAAOC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,MAAiBH,MAAMD,GAAN,GAAY,CAA7B,CAAX,IAA8CA,GAArD;AACD;;AAEM,UAASH,IAAT,CAAcQ,IAAd,EAAoBC,IAApB,EAA0BC,SAA1B,EAAqC;AAC1C,UAAOL,KAAKM,GAAL,CAASH,OAAOC,IAAhB,KAAyBC,SAAhC;AACD,E;;;;;;;;;;;ACVD,KAAIE,WAAW,EAAf;;AAEAA,UAASC,WAAT,GAAuB,UAASC,WAAT,EAAsBC,SAAtB,EAAiCC,UAAjC,EAA6C;AAClE,UAAO,IAAIC,OAAJ,CAAY,UAASC,OAAT,EAAkB;AACnC,SAAIC,eAAeC,SAASC,aAAT,CAAuB,KAAvB,CAAnB;AACAF,kBAAaG,MAAb,GAAsB,UAASC,KAAT,EAAgB;AACpC,WAAIC,QAAQD,MAAME,MAAlB;AACA,WAAIC,SAASN,SAASC,aAAT,CAAuB,QAAvB,CAAb;AACA,WAAIM,QAAQH,MAAMG,KAAlB;AACA,WAAIC,SAASJ,MAAMI,MAAnB;AACAF,cAAOC,KAAP,GAAeA,KAAf;AACAD,cAAOE,MAAP,GAAgBA,MAAhB;AACA,WAAIC,MAAMH,OAAOI,UAAP,CAAkB,IAAlB,CAAV;AACAD,WAAIE,SAAJ,CAAcP,KAAd,EAAqB,CAArB,EAAwB,CAAxB,EAA2BG,KAA3B,EAAkCC,MAAlC;AACA,WAAII,YAAYH,IAAII,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuBN,KAAvB,EAA8BC,MAA9B,CAAhB;AACAI,iBAAUE,GAAV,GAAgBV,KAAhB;AACAQ,iBAAUjB,SAAV,GAAsBA,SAAtB;AACAiB,iBAAUhB,UAAV,GAAuBA,UAAvB;AACAgB,iBAAUG,WAAV,GAAwB9B,KAAKC,KAAL,CAAWqB,QAAQZ,SAAnB,CAAxB;AACAiB,iBAAUI,QAAV,GAAqB/B,KAAKC,KAAL,CAAWsB,SAASZ,UAApB,CAArB;AACAE,eAAQc,SAAR;AACD,MAhBD;AAiBAb,kBAAakB,GAAb,GAAmBvB,WAAnB;AACD,IApBM,CAAP;AAqBD,EAtBD;;AAwBAF,UAAS0B,QAAT,GAAoB,UAASC,OAAT,EAAkBC,KAAlB,EAAyBC,KAAzB,EAAgCxC,CAAhC,EAAmCC,CAAnC,EAAsC2B,GAAtC,EAA2C;AAC7D,OAAIa,KAAKrC,KAAKC,KAAL,CAAWiC,QAAQxB,SAAR,GAAoByB,KAA/B,CAAT;AACA,OAAIG,KAAKtC,KAAKC,KAAL,CAAWiC,QAAQvB,UAAR,GAAqByB,KAAhC,CAAT;AACAZ,OAAIE,SAAJ,CAAcQ,QAAQL,GAAtB,EACEQ,EADF,EACMC,EADN,EACUJ,QAAQxB,SADlB,EAC6BwB,QAAQvB,UADrC,EAEEf,CAFF,EAEMC,CAFN,EAEUqC,QAAQxB,SAFlB,EAE6BwB,QAAQvB,UAFrC;AAGD,EAND;;mBAQeJ,Q;;;;;;;;;;;;;;AClCf;;;;KAEqBgC,S;AACnB,sBAAYC,KAAZ,EAAmBC,GAAnB,EAAwB;AAAA;;AACtB,UAAKD,KAAL,GAAaA,KAAb;AACA,UAAKC,GAAL,GAAWA,GAAX;AACA,UAAKC,KAAL,GAAa,EAAb;AACA,UAAKC,aAAL,CAAmB,UAAnB;AACA,UAAKA,aAAL,CAAmB,MAAnB;AACA,UAAKA,aAAL,CAAmB,MAAnB;AACA,UAAKA,aAAL,CAAmB,WAAnB;AACA,UAAKC,GAAL,GAAW,EAAChD,GAAG,EAAJ,EAAQC,GAAG,EAAX,EAAX;AACA,UAAKgD,QAAL,GAAgB,EAACjD,GAAG,CAAJ,EAAOC,GAAG,CAAV,EAAhB;AACA,UAAKiD,YAAL,GAAoB,EAAClD,GAAG,CAAJ,EAAOC,GAAG,MAAV,EAApB;AACA,UAAKkD,KAAL,GAAa,UAAb;AACA,UAAKC,QAAL,GAAgB,CAAhB;AACD;;;;4BAEMC,I,EAAM;AACX,WAAIC,UAAU,KAAKH,KAAL,KAAe,SAAf,GAA2B,EAA3B,GAAgC,EAA9C;AACA,WAAII,cAAc,MAAM,KAAKV,GAAL,CAASW,SAAT,CAAmB,KAAKR,GAAL,CAAShD,CAAT,GAAasD,OAAhC,EAAyC3B,MAAjE;AACA,WAAI,CAAC,iBAAK,KAAKqB,GAAL,CAAS/C,CAAd,EAAiBsD,WAAjB,EAA8B,GAA9B,CAAD,IAAuC,KAAKN,QAAL,CAAchD,CAAd,GAAkB,CAA7D,EAAiE;AAC/D,aAAI,KAAKgD,QAAL,CAAchD,CAAd,IAAmB,CAAvB,EAA0B;AACxB,gBAAKkD,KAAL,GAAa,SAAb;AACD,UAFD,MAEO;AACL,gBAAKA,KAAL,GAAa,SAAb;AACD;AACD,cAAKF,QAAL,CAAchD,CAAd,IAAmBoD,KAAKI,KAAL,GAAa,KAAKP,YAAL,CAAkBjD,CAAlD;AACA,aAAI,iBAAK,KAAKgD,QAAL,CAAchD,CAAnB,EAAsB,CAAtB,EAAyB,SAAzB,CAAJ,EAAyC;AACvC,gBAAKgD,QAAL,CAAchD,CAAd,GAAkB,CAAlB;AACD;AACD,cAAK+C,GAAL,CAAS/C,CAAT,IAAmBoD,KAAKI,KAAL,GAAa,KAAKR,QAAL,CAAchD,CAA9C;AACD,QAXD,MAWO;AACL,cAAKkD,KAAL,GAAa,SAAb;AACA,cAAKF,QAAL,CAAchD,CAAd,GAAkB,CAAlB;AACA,cAAK+C,GAAL,CAAS/C,CAAT,GAAkBsD,WAAlB;AACD;AACD,YAAKH,QAAL,GAAiBC,KAAKK,KAAL,GAAa,CAAd,GAAmB,CAAnB,GAAuB,CAAvB,GAA2B,CAA3C;AACD;;;4BAEMC,Q,EAAU/B,G,EAAK;AACpB,WAAIgC,YAAY,CAAhB;AACA,WAAI,KAAKT,KAAL,KAAe,SAAnB,EAA8B;AAC5BS,qBAAY,KAAKR,QAAjB;AACD,QAFD,MAEO,IAAI,KAAKD,KAAL,KAAe,SAAnB,EAA8B;AACnCS,qBAAY,CAAZ;AACD,QAFM,MAEA,IAAI,KAAKT,KAAL,KAAe,SAAnB,EAA8B;AACnCS,qBAAY,CAAZ;AACD;AACDD,gBAAStB,QAAT,CAAkB,KAAKO,KAAL,CAAWiB,QAA7B,EAAuC,KAAKf,KAAL,CAAWe,QAAlD,EAA4D,CAA5D,EAA+D,KAAKb,GAAL,CAAShD,CAAxE,EAA2E,KAAKgD,GAAL,CAAS/C,CAApF,EAAuF2B,GAAvF;AACA+B,gBAAStB,QAAT,CAAkB,KAAKO,KAAL,CAAWkB,IAA7B,EAAmC,KAAKhB,KAAL,CAAWgB,IAA9C,EAAoDF,SAApD,EAA+D,KAAKZ,GAAL,CAAShD,CAAxE,EAA2E,KAAKgD,GAAL,CAAS/C,CAApF,EAAuF2B,GAAvF;AACA+B,gBAAStB,QAAT,CAAkB,KAAKO,KAAL,CAAWmB,IAA7B,EAAmC,KAAKjB,KAAL,CAAWiB,IAA9C,EAAoD,CAApD,EAAuD,KAAKf,GAAL,CAAShD,CAAhE,EAAmE,KAAKgD,GAAL,CAAS/C,CAA5E,EAA+E2B,GAA/E;AACA+B,gBAAStB,QAAT,CAAkB,KAAKO,KAAL,CAAWoB,SAA7B,EAAwC,KAAKlB,KAAL,CAAWkB,SAAnD,EAA8D,CAA9D,EAAiE,KAAKhB,GAAL,CAAShD,CAA1E,EAA6E,KAAKgD,GAAL,CAAS/C,CAAtF,EAAyF2B,GAAzF;AACD;;;uCAEiB,CAEjB;;;4BAEM;AACLqC,eAAQC,GAAR,CAAY,KAAKlB,GAAjB,EAAsB,KAAKC,QAA3B;AACA,WAAI,KAAKA,QAAL,CAAchD,CAAd,KAAoB,CAAxB,EAA2B;AACzB,cAAKgD,QAAL,CAAchD,CAAd,GAAkB,CAAC,IAAnB;AACD;AACF;;;mCAEakE,Q,EAAU;AACtB,YAAKrB,KAAL,CAAWqB,QAAX,IAAuB/D,KAAKC,KAAL,CAAYD,KAAKE,MAAL,KAAgB,KAAKsC,KAAL,CAAWuB,QAAX,EAAqBjC,WAAjD,CAAvB;AACD;;;iCAEWiC,Q,EAAU;AACpB,YAAKrB,KAAL,CAAWqB,QAAX,IAAuB,CAAC,KAAKrB,KAAL,CAAWqB,QAAX,IAAuB,CAAxB,IAA6B,KAAKvB,KAAL,CAAWuB,QAAX,EAAqBjC,WAAzE;AACD;;;;;;mBAtEkBS,S;;;;;;;;;;;;;;;;KCFAyB,G;AACnB,gBAAYxB,KAAZ,EAAmByB,SAAnB,EAA8B;AAAA;;AAC5B,UAAKzB,KAAL,GAAaA,KAAb;AACA,UAAK0B,KAAL,GAAaD,UAAUE,KAAV,CAAgB,EAAhB,CAAb;AACA,UAAKvE,CAAL,GAAS,CAAT;AACD;;;;4BACMqD,I,EAAM;AACX,YAAKrD,CAAL,IAAUqD,KAAKI,KAAL,GAAa,GAAvB;AACD;;;+BACSe,M,EAAQ;AAChB,WAAIC,UAAU,CAAC,CAAC,GAAF,EAAO,EAAP,EAAW,EAAX,EAAe,EAAf,CAAd;AACA,WAAIC,QAAQtE,KAAKC,KAAL,CAAW,CAAC,CAAC,KAAKL,CAAN,GAAUwE,MAAX,IAAqB,KAAK5B,KAAL,CAAW+B,QAAX,CAAoB7D,SAApD,CAAZ;AACA,WAAI8D,OAAO,KAAKN,KAAL,CAAWI,KAAX,CAAX;AACA,cAAO,EAAC/C,QAAQ8C,QAAQG,IAAR,CAAT,EAAP;AACD;;;4BACMjB,Q,EAAU/B,G,EAAK;AAAA;;AACpB,WAAM3B,IAAI,CAAC,GAAD,EAAM,GAAN,EAAW,EAAX,EAAe,EAAf,EAAmB,EAAnB,CAAV;AACA,WAAM4E,SAAS,CAAf;AACA,WAAMC,cAAc,CAApB;AACA,WAAMC,aAAa,CAAnB;AACA,WAAMC,aAAa,CAAnB;AACA,WAAIC,eAAe7E,KAAKC,KAAL,CAAY,CAAC,KAAKL,CAAP,GAAY,KAAK4C,KAAL,CAAW+B,QAAX,CAAoB7D,SAA3C,CAAnB;AACA,WAAIoE,gBAAgBD,eAAe,EAAnC;AACA,WAAIE,eAAe,KAAKb,KAAL,CAAWc,KAAX,CAAiBH,YAAjB,EAA+BC,aAA/B,CAAnB;AACA,YAAKZ,KAAL,CAAWe,OAAX,CAAmB,UAACC,CAAD,EAAIZ,KAAJ,EAAc;AAC/B,aAAIA,QAAQO,YAAR,IAAwBP,QAAQQ,aAApC,EAAmD;AACjD;AACD;AACD,aAAIlF,IAAI,MAAKA,CAAL,GAAS,MAAK4C,KAAL,CAAW+B,QAAX,CAAoB7D,SAApB,GAAgC4D,KAAjD;AACA,iBAAOY,CAAP;AACA,gBAAK,GAAL;AACE;AACF,gBAAK,GAAL;AACE3B,sBAAStB,QAAT,CAAkB,MAAKO,KAAL,CAAW+B,QAA7B,EAAuCK,UAAvC,EAAmD,CAAnD,EAAsDhF,CAAtD,EAAyDC,EAAE,CAAF,CAAzD,EAA+D2B,GAA/D;AACA;AACF,gBAAK,GAAL;AACE+B,sBAAStB,QAAT,CAAkB,MAAKO,KAAL,CAAW+B,QAA7B,EAAuCI,UAAvC,EAAmD,CAAnD,EAAsD/E,CAAtD,EAAyDC,EAAE,CAAF,CAAzD,EAA+D2B,GAA/D;AACA+B,sBAAStB,QAAT,CAAkB,MAAKO,KAAL,CAAW+B,QAA7B,EAAuCK,UAAvC,EAAmD,CAAnD,EAAsDhF,CAAtD,EAAyDC,EAAE,CAAF,CAAzD,EAA+D2B,GAA/D;AACA;AACF,gBAAK,GAAL;AACE+B,sBAAStB,QAAT,CAAkB,MAAKO,KAAL,CAAW+B,QAA7B,EAAuCI,UAAvC,EAAmD,CAAnD,EAAsD/E,CAAtD,EAAyDC,EAAE,CAAF,CAAzD,EAA+D2B,GAA/D;AACA+B,sBAAStB,QAAT,CAAkB,MAAKO,KAAL,CAAW+B,QAA7B,EAAuCI,UAAvC,EAAmD,CAAnD,EAAsD/E,CAAtD,EAAyDC,EAAE,CAAF,CAAzD,EAA+D2B,GAA/D;AACA+B,sBAAStB,QAAT,CAAkB,MAAKO,KAAL,CAAW+B,QAA7B,EAAuCK,UAAvC,EAAmD,CAAnD,EAAsDhF,CAAtD,EAAyDC,EAAE,CAAF,CAAzD,EAA+D2B,GAA/D;AACA;AAdF;AAgBD,QArBD;AAsBD;;;;;;mBA9CkBwC,G;;;;;;;;;;;;;;;;KCAAmB,K;AACnB,kBAAYC,IAAZ,EAAkBC,QAAlB,EAA4B;AAAA;;AAC1B,UAAKC,OAAL,GAAe,CAAf;AACA,UAAKhC,KAAL,GAAa,CAAb;AACA,UAAKiC,OAAL,GAAe,KAAf;AACA,UAAKF,QAAL,GAAgBA,QAAhB;AACA,UAAKD,IAAL,GAAYA,IAAZ;AACD;;;;6BAEO;AACN,WAAI,KAAKG,OAAL,KAAiB,KAArB,EAA4B;AAC1B,cAAKA,OAAL,GAAe,IAAf;AACA,cAAKC,WAAL,GAAmBC,KAAKC,GAAL,EAAnB;AACA,cAAKN,IAAL,CAAUO,IAAV;AACD;AACDC,6BAAsB,KAAKC,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAtB;AACA,WAAIC,UAAUN,KAAKC,GAAL,EAAd;AACA,WAAIM,YAAYD,UAAU,KAAKP,WAA/B;AACA,YAAKA,WAAL,GAAmBO,OAAnB;AACA,cAAOC,YAAY,CAAnB,EAAsB;AACpB,aAAI3C,QAAQrD,KAAKF,GAAL,CAASkG,SAAT,EAAoB,KAAKX,QAAzB,CAAZ;AACAW,sBAAa3C,KAAb;AACA,cAAKiC,OAAL,IAAgBjC,KAAhB;AACA,cAAK+B,IAAL,CAAUa,MAAV,CAAiB,EAAC5C,YAAD,EAAQC,OAAO,KAAKA,KAApB,EAA2BgC,SAAS,KAAKA,OAAzC,EAAjB;AACD;AACD,YAAKhC,KAAL;AACA,YAAK8B,IAAL,CAAUc,MAAV;AACD;;;;;;mBA3BkBf,K;;;;;;;;ACArB;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,KAAMgB,QAAQ,yGAAd;;AAEA,KAAIC,OAAO;AACTT,OADS,kBACF;AACL,UAAKlD,GAAL,GAAW,kBAAQ4D,OAAOC,KAAf,EAAsBH,KAAtB,CAAX;AACA,UAAKI,SAAL,GAAiB,wBAAcF,OAAOC,KAArB,EAA4B,KAAK7D,GAAjC,CAAjB;AACD,IAJQ;AAKTwD,SALS,kBAKFhD,IALE,EAKI;AACX,UAAKR,GAAL,CAASwD,MAAT,CAAgBhD,IAAhB;AACA,UAAKsD,SAAL,CAAeN,MAAf,CAAsBhD,IAAtB;AACD,IARQ;AASTiD,SATS,oBASA;AACPM,eAAUhF,GAAV,CAAciF,SAAd,GAA0B,SAA1B;AACAD,eAAUhF,GAAV,CAAckF,QAAd,CAAuB,CAAvB,EAA0B,CAA1B,EAA6BF,UAAUhF,GAAV,CAAcH,MAAd,CAAqBC,KAAlD,EAAyDkF,UAAUhF,GAAV,CAAcH,MAAd,CAAqBE,MAA9E;AACA,UAAKkB,GAAL,CAASyD,MAAT,qBAA0BM,UAAUhF,GAApC;AACA,UAAK+E,SAAL,CAAeL,MAAf,qBAAgCM,UAAUhF,GAA1C;AACD;AAdQ,EAAX;AAgBA,KAAImF,YAAY,oBAAUP,IAAV,EAAgB,IAAI,EAApB,CAAhB;;AAEA,KAAII,YAAY,EAAhB;AACAA,WAAUhF,GAAV,GAAgBT,SAAS6F,aAAT,CAAuB,QAAvB,EAAiCnF,UAAjC,CAA4C,IAA5C,CAAhB;AACA,KAAI4E,SAAS,EAAb;AACAA,QAAOC,KAAP,GAAe,EAAf;AACA1F,SAAQiG,GAAR,CAAY,CACV,mBAASrG,WAAT,CAAqB,qBAArB,EAA4C,EAA5C,EAAgD,EAAhD,CADU,EAEV,mBAASA,WAAT,CAAqB,gBAArB,EAAuC,EAAvC,EAA2C,EAA3C,CAFU,EAGV,mBAASA,WAAT,CAAqB,gBAArB,EAAuC,EAAvC,EAA2C,EAA3C,CAHU,EAIV,mBAASA,WAAT,CAAqB,sBAArB,EAA6C,EAA7C,EAAiD,EAAjD,CAJU,EAKV,mBAASA,WAAT,CAAqB,YAArB,EAAmC,EAAnC,EAAuC,EAAvC,CALU,CAAZ,EAMGsG,IANH,CAMQ,UAASC,QAAT,EAAmB;AACzBV,UAAOC,KAAP,CAAa7C,QAAb,GAAwBsD,SAAS,CAAT,CAAxB;AACAV,UAAOC,KAAP,CAAa5C,IAAb,GAAoBqD,SAAS,CAAT,CAApB;AACAV,UAAOC,KAAP,CAAa3C,IAAb,GAAoBoD,SAAS,CAAT,CAApB;AACAV,UAAOC,KAAP,CAAa1C,SAAb,GAAyBmD,SAAS,CAAT,CAAzB;AACAV,UAAOC,KAAP,CAAa/B,QAAb,GAAwBwC,SAAS,CAAT,CAAxB;AACAJ,aAAUd,KAAV;AACD,EAbD;;AAeAmB,QAAOC,gBAAP,CAAwB,SAAxB,EAAmC,UAASC,CAAT,EAAY;AAC7C,OAAIC,MAAMD,EAAEC,GAAZ;AACA,WAAOA,GAAP;AACA,UAAK,GAAL;AACEf,YAAKG,SAAL,CAAea,WAAf,CAA2B,UAA3B;AACA;AACF,UAAK,GAAL;AACEhB,YAAKG,SAAL,CAAea,WAAf,CAA2B,MAA3B;AACA;AACF,UAAK,GAAL;AACEhB,YAAKG,SAAL,CAAea,WAAf,CAA2B,MAA3B;AACA;AACF,UAAK,GAAL;AACEhB,YAAKG,SAAL,CAAea,WAAf,CAA2B,WAA3B;AACA;AACF,UAAK,GAAL;AACEhB,YAAKG,SAAL,CAAec,IAAf;AACA;AAfF;AAiBD,EAnBD,E","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 1fe3fc874e62dbeb848a\n **/","export function mod(x, y) {\n  return ((x % y) + y) % y;\n}\n\nexport function randomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport function near(num1, num2, threshold) {\n  return Math.abs(num1 - num2) <= threshold;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./utils.js\n **/","let Graphics = {};\n\nGraphics.loadTileSet = function(imageSource, tileWidth, tileHeight) {\n  return new Promise(function(resolve) {\n    var imageElement = document.createElement('img');\n    imageElement.onload = function(event) {\n      var image = event.target;\n      var canvas = document.createElement('canvas');\n      var width = image.width;\n      var height = image.height;\n      canvas.width = width;\n      canvas.height = height;\n      var ctx = canvas.getContext('2d');\n      ctx.drawImage(image, 0, 0, width, height);\n      var imageData = ctx.getImageData(0, 0, width, height);\n      imageData.img = image;\n      imageData.tileWidth = tileWidth;\n      imageData.tileHeight = tileHeight;\n      imageData.tileColumns = Math.floor(width / tileWidth);\n      imageData.tileRows = Math.floor(height / tileHeight);\n      resolve(imageData);\n    };\n    imageElement.src = imageSource;\n  });\n};\n\nGraphics.drawTile = function(tileSet, tileX, tileY, x, y, ctx) {\n  var tX = Math.floor(tileSet.tileWidth * tileX);\n  var tY = Math.floor(tileSet.tileHeight * tileY);\n  ctx.drawImage(tileSet.img,\n    tX, tY, tileSet.tileWidth, tileSet.tileHeight,\n    x,  y,  tileSet.tileWidth, tileSet.tileHeight);\n};\n\nexport default Graphics;\n\n\n\n/** WEBPACK FOOTER **\n ** ./graphics.js\n **/","import { near } from './utils';\n\nexport default class Character {\n  constructor(tiles, map) {\n    this.tiles = tiles;\n    this.map = map;\n    this.parts = {};\n    this.setRandomPart('rearHair');\n    this.setRandomPart('face');\n    this.setRandomPart('body');\n    this.setRandomPart('frontHair');\n    this.pos = {x: 30, y: 50};\n    this.velocity = {x: 0, y: 0};\n    this.acceleration = {x: 0, y: 0.0005};\n    this.state = 'standing';\n    this.runFrame = 1;\n  }\n\n  update(time) {\n    let footPos = this.state === 'running' ? 11 : 18;\n    let floorHeight = 117 - this.map.whatsHere(this.pos.x + footPos).height;\n    if (!near(this.pos.y, floorHeight, 0.1) || this.velocity.y < 0 ) {\n      if (this.velocity.y <= 0) {\n        this.state = 'jumping';\n      } else {\n        this.state = 'falling';\n      }\n      this.velocity.y += time.delta * this.acceleration.y;\n      if (near(this.velocity.y, 0, 0.0000001)) {\n        this.velocity.y = 0;\n      }\n      this.pos.y      += time.delta * this.velocity.y;\n    } else {\n      this.state = 'running';\n      this.velocity.y = 0;\n      this.pos.y      = floorHeight;\n    }\n    this.runFrame = (time.ticks % 6) < 3 ? 1 : 2;\n  }\n\n  render(graphics, ctx) {\n    let animFrame = 0;\n    if (this.state === 'running') {\n      animFrame = this.runFrame;\n    } else if (this.state === 'jumping') {\n      animFrame = 3;\n    } else if (this.state === 'falling') {\n      animFrame = 0;\n    }\n    graphics.drawTile(this.tiles.rearHair, this.parts.rearHair, 0, this.pos.x, this.pos.y, ctx);\n    graphics.drawTile(this.tiles.body, this.parts.body, animFrame, this.pos.x, this.pos.y, ctx);\n    graphics.drawTile(this.tiles.face, this.parts.face, 0, this.pos.x, this.pos.y, ctx);\n    graphics.drawTile(this.tiles.frontHair, this.parts.frontHair, 0, this.pos.x, this.pos.y, ctx);\n  }\n\n  _checkCollision() {\n\n  }\n\n  jump() {\n    console.log(this.pos, this.velocity);\n    if (this.velocity.y === 0) {\n      this.velocity.y = -0.24;\n    }\n  }\n\n  setRandomPart(partName) {\n    this.parts[partName] = Math.floor((Math.random() * this.tiles[partName].tileColumns));\n  }\n\n  setNextPart(partName) {\n    this.parts[partName] = (this.parts[partName] + 1) % this.tiles[partName].tileColumns;\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./character.js\n **/","export default class Map {\n  constructor(tiles, mapstring) {\n    this.tiles = tiles;\n    this.stage = mapstring.split('');\n    this.x = 0;\n  }\n  update(time) {\n    this.x -= time.delta * 0.1;\n  }\n  whatsHere(offset) {\n    let heights = [-100, 13, 29, 45];\n    let index = Math.floor((-this.x + offset) / this.tiles.mapTiles.tileWidth);\n    let tile = this.stage[index];\n    return {height: heights[tile]};\n  }\n  render(graphics, ctx) {\n    const y = [128, 112, 96, 80, 68];\n    const GROUND = 0;\n    const COLUMN_ROOT = 1;\n    const COLUMN_MID = 2;\n    const COLUMN_TOP = 3;\n    let leftmostTile = Math.floor((-this.x) / this.tiles.mapTiles.tileWidth);\n    let rightmostTile = leftmostTile + 10;\n    let visibleTiles = this.stage.slice(leftmostTile, rightmostTile);\n    this.stage.forEach((t, index) => {\n      if (index < leftmostTile || index > rightmostTile) {\n        return;\n      }\n      let x = this.x + this.tiles.mapTiles.tileWidth * index;\n      switch(t) {\n      case '0':\n        break;\n      case '1':\n        graphics.drawTile(this.tiles.mapTiles, COLUMN_TOP, 0, x, y[0], ctx);\n        break;\n      case '2':\n        graphics.drawTile(this.tiles.mapTiles, COLUMN_MID, 0, x, y[0], ctx);\n        graphics.drawTile(this.tiles.mapTiles, COLUMN_TOP, 0, x, y[1], ctx);\n        break;\n      case '3':\n        graphics.drawTile(this.tiles.mapTiles, COLUMN_MID, 0, x, y[0], ctx);\n        graphics.drawTile(this.tiles.mapTiles, COLUMN_MID, 0, x, y[1], ctx);\n        graphics.drawTile(this.tiles.mapTiles, COLUMN_TOP, 0, x, y[2], ctx);\n        break;\n      }\n    });\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./map.js\n **/","export default class Timer {\n  constructor(game, timeStep) {\n    this.runTime = 0;\n    this.ticks = 0;\n    this.started = false;\n    this.timeStep = timeStep;\n    this.game = game;\n  }\n\n  start() {\n    if (this.started === false) {\n      this.started = true;\n      this.currentTime = Date.now();\n      this.game.init();\n    }\n    requestAnimationFrame(this.start.bind(this));\n    let newTime = Date.now();\n    let frameTime = newTime - this.currentTime;\n    this.currentTime = newTime;\n    while (frameTime > 0) {\n      var delta = Math.min(frameTime, this.timeStep);\n      frameTime -= delta;\n      this.runTime += delta;\n      this.game.update({delta, ticks: this.ticks, runTime: this.runTime});\n    }\n    this.ticks++;\n    this.game.render();\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./timer.js\n **/","import Graphics from './graphics';\nimport Character from './character';\nimport Timer from './timer';\nimport Map from './map';\n\nconst map01 = \"1121111111111211111000110111211131123111111113111110011011111000011111111113331111110000000000000000000\";\n\nlet Game = {\n  init() {\n    this.map = new Map(Assets.Tiles, map01);\n    this.character = new Character(Assets.Tiles, this.map);\n  },\n  update(time) {\n    this.map.update(time);\n    this.character.update(time);\n  },\n  render() {\n    Gamestate.ctx.fillStyle = '#b4a56a';\n    Gamestate.ctx.fillRect(0, 0, Gamestate.ctx.canvas.width, Gamestate.ctx.canvas.height);\n    this.map.render(Graphics, Gamestate.ctx);\n    this.character.render(Graphics, Gamestate.ctx);\n  }\n};\nlet gameTimer = new Timer(Game, 1 / 60);\n\nlet Gamestate = {};\nGamestate.ctx = document.querySelector('canvas').getContext('2d');\nlet Assets = {};\nAssets.Tiles = {};\nPromise.all([\n  Graphics.loadTileSet('i/ppl_rear_hair.png', 27, 27),\n  Graphics.loadTileSet('i/ppl_body.png', 27, 27),\n  Graphics.loadTileSet('i/ppl_face.png', 27, 27),\n  Graphics.loadTileSet('i/ppl_front_hair.png', 27, 27),\n  Graphics.loadTileSet('i/misc.png', 16, 16)\n]).then(function(tilesets) {\n  Assets.Tiles.rearHair = tilesets[0];\n  Assets.Tiles.body = tilesets[1];\n  Assets.Tiles.face = tilesets[2];\n  Assets.Tiles.frontHair = tilesets[3];\n  Assets.Tiles.mapTiles = tilesets[4];\n  gameTimer.start();\n});\n\nwindow.addEventListener('keydown', function(e) {\n  let key = e.key;\n  switch(key) {\n  case 'w':\n    Game.character.setNextPart('rearHair');\n    break;\n  case 'a':\n    Game.character.setNextPart('body');\n    break;\n  case 's':\n    Game.character.setNextPart('face');\n    break;\n  case 'd':\n    Game.character.setNextPart('frontHair');\n    break;\n  case 'z':\n    Game.character.jump();\n    break;\n  }\n});\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./game.js\n **/"],"sourceRoot":""}