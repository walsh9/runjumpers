{"version":3,"sources":["webpack:///webpack/bootstrap aa48d4476c62753686fd","webpack:///./game.js","webpack:///./graphics.js","webpack:///./character.js","webpack:///./utils.js","webpack:///./timer.js","webpack:///./map.js","webpack:///./screens/title.js","webpack:///./screen.js","webpack:///./screens/create.js","webpack:///./screens/running.js"],"names":["window","Game","init","currentScreen","update","time","render","Gamestate","ctx","gameTimer","document","querySelector","getContext","Assets","tiles","panels","Promise","all","loadTileSet","then","tilesets","rearHair","body","face","frontHair","mapTiles","font","title","assets","start","addEventListener","event","key","keydown","Graphics","imageSource","tileWidth","tileHeight","resolve","imageElement","createElement","onload","image","target","canvas","width","height","drawImage","imageData","getImageData","img","tileColumns","Math","floor","tileRows","src","clearScreen","color","fillStyle","fillRect","drawTile","tileSet","tileX","tileY","x","y","tX","tY","chars","split","drawText","text","length","char","charIndex","charX","charY","i","charAt","indexOf","Character","charParams","map","runSpeed","parts","randomizeParts","pos","velocity","acceleration","state","runFrame","delta","footPos","floorHeight","heightHere","ticks","graphics","animFrame","setRandomPart","partName","random","mod","randomInt","randomBetween","near","min","max","num1","num2","threshold","abs","Timer","game","timeStep","runTime","started","currentTime","Date","now","requestAnimationFrame","bind","newTime","frameTime","Y_FROM_FLOOR","GROUND","COLUMN_ROOT","COLUMN_MID","COLUMN_TOP","CLOUD_RIGHT","CLOUD_LEFT","PLATFORM","HEIGHTS","Map","params","stage","mapstring","scrollSpeed","bg","clouds","c","push","_randomCloud","speed","cloud","_updateCloud","offset","index","tile","leftmostTile","rightmostTile","forEach","t","TitleScreen","character","nextJump","blink","jump","Screen","CreateScreen","selection","choices","setPrevPart","setNextPart","nextScreen","selectUp","preventDefault","selectDown","setLeft","setRight","map01","RunningScreen","hop"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap aa48d4476c62753686fd\n **/","import Graphics from './graphics';\nimport Character from './character';\nimport Timer from './timer';\nimport Map from './map';\nimport TitleScreen from './screens/title';\n\nwindow.Game = {\n  init() {\n    this.currentScreen = new TitleScreen(this);\n  },\n  update(time) {\n    this.currentScreen.update(time);\n  },\n  render() {\n    this.currentScreen.render(Graphics, Gamestate.ctx);\n  }\n};\nlet gameTimer = new Timer(Game, 1 / 60);\n\nlet Gamestate = {};\nGamestate.ctx = document.querySelector('canvas').getContext('2d');\nlet Assets = {};\nAssets.tiles = {};\nAssets.panels = {};\nPromise.all([\n  Graphics.loadTileSet('i/ppl_rear_hair.png', 27, 27),\n  Graphics.loadTileSet('i/ppl_body.png', 27, 27),\n  Graphics.loadTileSet('i/ppl_face.png', 27, 27),\n  Graphics.loadTileSet('i/ppl_front_hair.png', 27, 27),\n  Graphics.loadTileSet('i/misc.png', 16, 16),\n  Graphics.loadTileSet('i/font5x7.png', 5, 7),\n  Graphics.loadTileSet('i/logo.png', 160, 144)\n]).then(function(tilesets) {\n  Assets.tiles.rearHair = tilesets[0];\n  Assets.tiles.body = tilesets[1];\n  Assets.tiles.face = tilesets[2];\n  Assets.tiles.frontHair = tilesets[3];\n  Assets.tiles.mapTiles = tilesets[4];\n  Assets.font = tilesets[5];\n  Assets.panels.title = tilesets[6];\n  window.Game.assets = Assets;\n  gameTimer.start();\n});\n\nwindow.addEventListener('keydown', function(event) {\n  let key = event.key;\n  Game.currentScreen.keydown(key, event);\n});\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./game.js\n **/","let Graphics = {};\n\nGraphics.loadTileSet = function(imageSource, tileWidth, tileHeight) {\n  return new Promise(function(resolve) {\n    var imageElement = document.createElement('img');\n    imageElement.onload = function(event) {\n      var image = event.target;\n      var canvas = document.createElement('canvas');\n      var width = image.width;\n      var height = image.height;\n      canvas.width = width;\n      canvas.height = height;\n      var ctx = canvas.getContext('2d');\n      ctx.drawImage(image, 0, 0, width, height);\n      var imageData = ctx.getImageData(0, 0, width, height);\n      imageData.img = image;\n      imageData.tileWidth = tileWidth;\n      imageData.tileHeight = tileHeight;\n      imageData.tileColumns = Math.floor(width / tileWidth);\n      imageData.tileRows = Math.floor(height / tileHeight);\n      resolve(imageData);\n    };\n    imageElement.src = imageSource;\n  });\n};\n\nGraphics.clearScreen = function(ctx, color) {\n  ctx.fillStyle = color;\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n};\n\nGraphics.drawTile = function(tileSet, tileX, tileY, x, y, ctx) {\n  var tX = tileSet.tileWidth * tileX;\n  var tY = tileSet.tileHeight * tileY;\n  x = Math.floor(x);\n  y = Math.floor(y);\n  ctx.drawImage(tileSet.img,\n    tX, tY, tileSet.tileWidth, tileSet.tileHeight,\n    x,  y,  tileSet.tileWidth, tileSet.tileHeight);\n};\n\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .!?,\\'\":;_-+=/\\\\[]()#@%{}<>^*&~|→←↑↓○●$€¥'.split('');\nGraphics.drawText = function(tileSet, text, x, y, ctx) {\n  if (x === 'center') {\n    x = Math.floor((ctx.canvas.width - text.length * (tileSet.tileWidth + 1)) / 2);\n  }\n  let char, charIndex, charX, charY;\n  for(let i = 0; i < text.length; i++) {\n    char = text.charAt(i);\n    charIndex = chars.indexOf(char);\n    charX = x + i * (tileSet.tileWidth + 1);\n    charY = ['g', 'j', 'p', 'q', 'y'].indexOf(char) > -1 ? y + 2 : y;\n    this.drawTile(tileSet, charIndex, 0, charX, charY, ctx);\n  };\n};\n\nexport default Graphics;\n\n\n\n/** WEBPACK FOOTER **\n ** ./graphics.js\n **/","import { near, mod } from './utils';\n\nexport default class Character {\n  constructor(charParams, map) {\n    this.tiles = charParams.tiles;\n    this.runSpeed = charParams.runSpeed;\n    this.map = map;\n    this.parts = {};\n    this.randomizeParts();\n    this.pos = {x: 30, y: 50};\n    this.velocity = {x: 0, y: 0};\n    this.acceleration = {x: 0, y: 0.0005};\n    this.state = 'standing';\n    this.runFrame = 1;\n  }\n\n  update(time) {\n    this.pos.x += time.delta * this.runSpeed;\n    let footPos = this.state === 'running' ? 11 : 18;\n    let floorHeight = 117 - this.map.heightHere(this.pos.x + footPos);\n    if (!near(this.pos.y, floorHeight, 0.1) || this.velocity.y < 0 ) {\n      if (this.velocity.y <= 0) {\n        this.state = 'jumping';\n      } else {\n        this.state = 'falling';\n      }\n      this.velocity.y += time.delta * this.acceleration.y;\n      if (near(this.velocity.y, 0, 0.0000001)) {\n        this.velocity.y = 0;\n      }\n      this.pos.y      += time.delta * this.velocity.y;\n    } else {\n      this.state = 'running';\n      this.velocity.y = 0;\n      this.pos.y      = floorHeight;\n    }\n    this.runFrame = (time.ticks % 6) < 3 ? 1 : 2;\n  }\n\n  render(graphics, ctx) {\n    let animFrame = 0;\n    if (this.state === 'running') {\n      animFrame = this.runFrame;\n    } else if (this.state === 'jumping') {\n      animFrame = 3;\n    } else if (this.state === 'falling') {\n      animFrame = 0;\n    }\n    graphics.drawTile(this.tiles.rearHair, this.parts.rearHair, 0, this.pos.x, this.pos.y, ctx);\n    graphics.drawTile(this.tiles.body, this.parts.body, animFrame, this.pos.x, this.pos.y, ctx);\n    graphics.drawTile(this.tiles.face, this.parts.face, 0, this.pos.x, this.pos.y, ctx);\n    graphics.drawTile(this.tiles.frontHair, this.parts.frontHair, 0, this.pos.x, this.pos.y, ctx);\n  }\n\n  jump() {\n    if (this.velocity.y === 0) {\n      this.velocity.y = -0.24;\n    }\n  }\n\n  hop() {\n    if (this.velocity.y === 0) {\n      this.velocity.y = -0.12;\n    }\n  }\n\n  randomizeParts() {\n    this.setRandomPart('rearHair');\n    this.setRandomPart('face');\n    this.setRandomPart('body');\n    this.setRandomPart('frontHair');\n  }\n\n  setRandomPart(partName) {\n    this.parts[partName] = Math.floor((Math.random() * this.tiles[partName].tileColumns));\n  }\n\n  setNextPart(partName) {\n    this.parts[partName] = mod(this.parts[partName] + 1, this.tiles[partName].tileColumns);\n  }\n\n  setPrevPart(partName) {\n    this.parts[partName] = mod(this.parts[partName] - 1, this.tiles[partName].tileColumns);\n  }\n\n}\n\n\n/** WEBPACK FOOTER **\n ** ./character.js\n **/","export function mod(x, y) {\n  return ((x % y) + y) % y;\n}\n\nexport function randomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport function randomBetween(min, max) {\n  return Math.random() * (max - min) + min;\n}\n\nexport function near(num1, num2, threshold) {\n  return Math.abs(num1 - num2) <= threshold;\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./utils.js\n **/","export default class Timer {\n  constructor(game, timeStep) {\n    this.time = {};\n    this.time.runTime = 0;\n    this.time.ticks = 0;\n    this.time.delta = 0;\n    this.started = false;\n    this.timeStep = timeStep;\n    this.game = game;\n  }\n\n  start() {\n    if (this.started === false) {\n      this.started = true;\n      this.currentTime = Date.now();\n      this.game.init();\n    }\n    requestAnimationFrame(this.start.bind(this));\n    let newTime = Date.now();\n    let frameTime = newTime - this.currentTime;\n    this.currentTime = newTime;\n    while (frameTime > 0) {\n      this.time.delta = Math.min(frameTime, this.timeStep);\n      frameTime -= this.time.delta;\n      this.time.runTime += this.time.delta;\n      this.game.update(this.time);\n    }\n    this.time.ticks++;\n    this.game.render();\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./timer.js\n **/","import { randomBetween } from './utils';\nconst Y_FROM_FLOOR = [128, 112, 96, 80, 68];\nconst GROUND = 0;\nconst COLUMN_ROOT = 1;\nconst COLUMN_MID = 2;\nconst COLUMN_TOP = 3;\nconst CLOUD_RIGHT = 8;\nconst CLOUD_LEFT = 7;\nconst PLATFORM = 9;\nconst HEIGHTS = [-100, 13, 29, 45, 61];\n\nexport default class Map {\n  constructor(params) {\n    this.tiles = params.tiles;\n    this.stage = params.mapstring.split('');\n    this.scrollSpeed = params.scrollSpeed;\n    this.bg = params.bg;\n    this.x = 0;\n    this.clouds = [];\n    if (this.bg) {\n      for (let c = 0; c < 20; c++) {\n        this.clouds.push(this._randomCloud());\n      }\n    }\n  }\n  _randomCloud() {\n    return {x: randomBetween(-6, 160), y: randomBetween(0, 120), speed: randomBetween(0.05, 0.2)};\n  }\n  _updateCloud(cloud, time) {\n    if (cloud.x > -40) {\n      cloud.x -= time.delta * cloud.speed;\n    } else {\n      cloud.x = 160;\n      cloud.y = randomBetween(0, 120);\n      cloud.speed = randomBetween(0.05, 0.2);\n    }\n  }\n  update(time, delta, ticks) {\n    this.x += time.delta * this.scrollSpeed;\n\n    for(let i = 0; i < this.clouds.length; i++) {\n      this._updateCloud(this.clouds[i], time);\n    }\n  }\n  heightHere(offset) {\n    let index = Math.floor((-this.x + offset) / this.tiles.mapTiles.tileWidth);\n    let tile = this.stage[index];\n    return HEIGHTS[tile];\n  }\n  render(graphics, ctx) {\n    let leftmostTile = Math.floor((-this.x) / this.tiles.mapTiles.tileWidth);\n    let rightmostTile = leftmostTile + 10;\n\n    let cloud;\n    for(let i = 0; i < this.clouds.length; i++) {\n      cloud = this. clouds[i];\n      graphics.drawTile(this.tiles.mapTiles, CLOUD_LEFT, 0, cloud.x, cloud.y, ctx);\n      graphics.drawTile(this.tiles.mapTiles, CLOUD_RIGHT, 0, cloud.x + 16, cloud.y, ctx);\n    };\n\n    this.stage.forEach((t, index) => {\n      if (index < leftmostTile || index > rightmostTile) {\n        return;\n      }\n      let x = this.x + this.tiles.mapTiles.tileWidth * index;\n      switch(t) {\n      case '0':\n        break;\n      case '1':\n      case '2':\n      case '3':\n      case '4':\n        graphics.drawTile(this.tiles.mapTiles, PLATFORM, 0, x, Y_FROM_FLOOR[t - 1], ctx);\n        break;\n      }\n    });\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./map.js\n **/","import Screen from '../screen';\nimport Map from '../map';\nimport Character from '../character';\nimport CreateScreen from './create';\nimport { randomInt } from '../utils';\n\nexport default class TitleScreen extends Screen {\n  constructor(game) {\n    super(game);\n    this.map = new Map({tiles: this.game.assets.tiles, mapstring: \"111111111111\", scrollSpeed: 0, bg: false});\n    this.map.x = -27;\n    this.character = new Character({tiles: this.game.assets.tiles, runSpeed: 0.1});\n    this.character.pos.y = 104;\n    this.character.pos.x = -27;\n    this.character.map = this.map;\n    this.nextJump = randomInt(500, 2000);\n  }\n\n  update(time) {\n    this.blink = time.ticks % 50 < 25;\n    this.character.update(time);\n    if (this.character.pos.x > 160) {\n      this.character.randomizeParts();\n      this.character.velocity.y = 0;\n      this.character.pos.y = 104;\n      this.character.pos.x = -27;\n    }\n    if (time.runTime > this.nextJump) {\n      this.character.jump();\n      this.nextJump = time.runTime + randomInt(500, 2000);\n    }\n\n  }\n\n  render(graphics, ctx) {\n    graphics.drawTile(this.game.assets.panels.title, 0, 0, 0, 0, ctx);\n    if (this.blink) {\n      graphics.drawText(this.game.assets.font, 'PRESS Z TO START', 'center', 90, ctx);\n    }\n    this.map.render(graphics, ctx);\n    this.character.render(graphics, ctx);\n  }\n\n  keydown(key) {\n    switch(key) {\n    case 'z':\n      this.game.currentScreen = new CreateScreen(this.game);\n      break;\n    }\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./screens/title.js\n **/","export default class Screen {\n  constructor(game) {\n    this.game = game;\n  }\n  update () {}\n  render () {}\n  keydown() {}\n}\n\n\n/** WEBPACK FOOTER **\n ** ./screen.js\n **/","import Screen from '../screen';\nimport { mod } from '../utils';\nimport RunningScreen from './running';\nimport Character from '../character';\n\nexport default class CreateScreen extends Screen {\n  constructor(game) {\n    super(game);\n    this.selection = 0;\n    this.choices = ['rearHair', 'frontHair', 'face', 'body', 'next'];\n    this.character = new Character({tiles: this.game.assets.tiles, runSpeed: 0});\n    this.blink = 0;\n  }\n\n  update(time) {\n    this.blink = time.ticks % 10 > 5;\n  }\n\n  render(graphics, ctx) {\n    graphics.clearScreen(ctx, '#b4a56a');\n    graphics.drawText(this.game.assets.font, 'CREATE A NEW RUNJUMPER', 'center', 10, ctx);\n    graphics.drawText(this.game.assets.font, 'HAIR', 80, 40, ctx);\n    graphics.drawText(this.game.assets.font, 'BANGS', 80, 50, ctx);\n    graphics.drawText(this.game.assets.font, 'FACE', 80, 60, ctx);\n    graphics.drawText(this.game.assets.font, 'BODY', 80, 70, ctx);\n    graphics.drawText(this.game.assets.font, 'RUN!', 80, 90, ctx);\n    if (this.selection < 4) {\n      graphics.drawText(this.game.assets.font, '←      →', 70, this.selection * 10 + 40, ctx);\n    }\n    if (this.selection === 4 && this.blink) {\n      graphics.drawText(this.game.assets.font, '[     ]', 70, 90, ctx);\n    }\n    this.character.render(graphics, ctx);\n  }\n\n  nextScreen() {\n    if (this.selection === 4) {\n      this.game.currentScreen = new RunningScreen(this.game, this.character);\n    }\n  }\n\n  selectUp() {\n    this.selection = Math.max(this.selection - 1, 0);\n  }\n\n  selectDown() {\n    this.selection = Math.min(this.selection + 1, this.choices.length - 1);\n  }\n\n  setLeft() {\n    if (this.selection < 4) {\n      this.character.setPrevPart(this.choices[this.selection]);\n    }\n  }\n\n  setRight() {\n    if (this.selection < 4) {\n      this.character.setNextPart(this.choices[this.selection]);\n    }\n  }\n\n  keydown(key, event) {\n    switch(key) {\n    case 'z':\n      this.nextScreen();\n      break;\n    case 'ArrowUp':\n      this.selectUp();\n      event.preventDefault();\n      break;\n    case 'ArrowDown':\n      this.selectDown();\n      event.preventDefault();\n      break;\n    case 'ArrowLeft':\n      this.setLeft();\n      event.preventDefault();\n      break;\n    case 'ArrowRight':\n      this.setRight();\n      event.preventDefault();\n      break;\n    }\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./screens/create.js\n **/","import Screen from '../screen';\nimport Map from '../map';\nimport Character from '../character';\n\nconst map01 = \"111111110001111111111111111110002222222224444444000000011111111111111113311331133111111122211113333332222222224444444440000011111\";\n\nexport default class RunningScreen extends Screen {\n  constructor(game, character) {\n    super(game);\n    this.map = new Map({tiles: this.game.assets.tiles, mapstring: map01, scrollSpeed: -0.1, bg: false});\n    this.character = character;\n    this.character.map = this.map;\n  }\n\n  update(time) {\n    this.map.update(time);\n    this.character.update(time);\n  }\n\n  render(graphics, ctx) {\n    graphics.clearScreen(ctx, '#b4a56a');\n    this.map.render(graphics, ctx);\n    this.character.render(graphics, ctx);\n  }\n\n  keydown(key) {\n    switch(key) {\n    case 'z':\n      this.character.jump();\n      break;\n    case 'x':\n      this.character.hop();\n      break;\n    }\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./screens/running.js\n **/"],"sourceRoot":""}